<!DOCTYPE html>
<html lang="en"<% if Current.user && Current.user.identity.theme_preference != "system" %> class="<%= Current.user.identity.theme_preference %>"<% end %>>
  <%= render "layouts/shared/head" %>

  <body data-controller="local-time timezone-cookie turbo-navigation" data-action="turbo:morph@window->local-time#refreshAll turbo:before-visit@document->turbo-navigation#rememberLocation">
    <header class="header <%= @header_class %>" id="header">
      <a href="#main" class="header__skip-navigation btn" data-turbo="false">Skip to main content</a>
      <%= render "my/menu" if Current.user %>
      <%= yield :header %>
    </header>

    <%= render "layouts/shared/flash" %>
    <%= render "layouts/shared/time_zone" if Current.user %>

    <main id="main">
      <%= yield %>
    </main>

    <footer id="footer">
      <%= yield :footer %>

      <% if Current.user && !@hide_footer_frames %>
        <div id="footer_frames" data-turbo-permanent="true">
          <%= render "bar/bar" %>
          <%= render "my/pins/tray" %>
          <%= render "notifications/tray" %>
        </div>
      <% end %>
    </footer>
  </body>
</html>
